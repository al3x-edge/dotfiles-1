#!/usr/bin/env bash

# Your Projects Directory
# I like to keep my projects in ~/Projects
# -----------------------------------------------------------------------------
home_directory="$HOME/Projects"
bower_components="$HOME/components"



# =============================================================================
# Initialise project
# =============================================================================
function init {
  while true; do
    if [ "${2:-}" = "Bootstrap" ]; then
      prompt="1/2"
       default=1
    elif [ "${2:-}" = "Foundation" ]; then
      prompt="1/2"
      default=2
    else
      prompt="1:Bootstrap | 2:Foundation"
      default=
    fi
    # Ask the question
    read -p "$1 [$prompt] " REPLY
    # Default?
    if [ -z "$REPLY" ]; then
       REPLY=$default
    fi
    # Check if the reply is valid
    case "$REPLY" in
      1*|1*) return 0 ;;
      2*|2*) return 1 ;;
    esac
  done
}




# Create Directory
function build_bootstrap {
  read -p "Please enter directory name: " directory_name
  
  if [ -d "$home_directory/$directory_name" ]; then
    
    # Ask user to enter a different name or overwrite the directory
    read -p "‚ùó the name you chose exists, overwrite matching files? [y/n] " respond
  
    # Write in this directory?
    if [ "$respond" = "y" ]; then
    mkdir -p $home_directory/$directory_name/assets/{css,fonts,img,js}
    
    cp -R "$bower_components/bootstrap/img"  "$home_directory/$directory_name/assets"
    cp -R "$bower_components/bootstrap/js"   "$home_directory/$directory_name/assets"
    cp -R "$bower_components/bootstrap/less" "$home_directory/$directory_name/assets"

    echo "‚úÖ  Done! Built Bootstrap project in $home_directory/$directory_name"
    echo ""
     
    elif [ "$respond" = "n" ]; then
      echo "üö´  no balls to do it huh? now aborting..."
      echo ""
      exit      
    fi
    
  else
    mkdir -p $home_directory/$directory_name/assets/{css,fonts,img,js}
    cp -R "$bower_components/bootstrap/img"  "$home_directory/$directory_name/assets"
    cp -R "$bower_components/bootstrap/js"   "$home_directory/$directory_name/assets"
    cp -R "$bower_components/bootstrap/less" "$home_directory/$directory_name/assets"

    echo "‚úÖ  Done! Built Bootstrap project in $home_directory/$directory_name"
    echo ""

  fi
}


# =============================================================================
# Begin Installation Process
# =============================================================================

if init "Initialise Project using: "; then
# Bootstrap 
# =============================================================================
  
  if [[ -d "$bower_components/bootstrap" && ! -L "$bower_components/bootstrap" ]] ; then
    echo "Creating project using Bootstrap"
    build_bootstrap
  else
    echo " Installing Bower Package: Bootstrap"
    echo "$bower_components/bootstrap doesnt exists"
    bower install bootstrap
    build_bootstrap
  fi
    
else
# Foundation
# =============================================================================
  
  echo "foundation"
fi